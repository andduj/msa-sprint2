# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ REST –∏ gRPC –∑–∞–ø—Ä–æ—Å–æ–≤

## 1. REST –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –º–æ–Ω–æ–ª–∏—Ç
GET /api/bookings?userId=test-user-2

Response (JSON):
[
  {
    "id": 1,
    "userId": "test-user-2",
    "hotelId": "test-hotel-1",
    "promoCode": "TESTCODE1",
    "discountPercent": 10.0,
    "price": 90.0,
    "createdAt": "2025-01-27T10:30:00Z"
  },
  {
    "id": 2,
    "userId": "test-user-2",
    "hotelId": "test-hotel-3",
    "promoCode": null,
    "discountPercent": 0.0,
    "price": 100.0,
    "createdAt": "2025-01-27T10:40:00Z"
  }
]

## 2. gRPC –∑–∞–ø—Ä–æ—Å –∫ booking-service
Request:
{
  "user_id": "test-user-2"
}

Response (protobuf):
{
  "bookings": [
    {
      "id": "1",
      "user_id": "test-user-2",
      "hotel_id": "test-hotel-1",
      "promo_code": "TESTCODE1",
      "discount_percent": 10.0,
      "price": 90.0,
      "created_at": "2025-01-27T10:30:00Z"
    },
    {
      "id": "2",
      "user_id": "test-user-2",
      "hotel_id": "test-hotel-3",
      "promo_code": "",
      "discount_percent": 0.0,
      "price": 100.0,
      "created_at": "2025-01-27T10:40:00Z"
    }
  ]
}

## 3. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### REST (—á–µ—Ä–µ–∑ –º–æ–Ω–æ–ª–∏—Ç):
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ~150ms
- –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞: 512 bytes
- –ü—Ä–æ—Ç–æ–∫–æ–ª: HTTP/JSON
- –°–∂–∞—Ç–∏–µ: gzip

### gRPC (–Ω–∞–ø—Ä—è–º—É—é –∫ booking-service):
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ~50ms
- –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞: 280 bytes
- –ü—Ä–æ—Ç–æ–∫–æ–ª: HTTP/2 + Protobuf
- –°–∂–∞—Ç–∏–µ: –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ

## 4. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ gRPC

‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –≤ 3 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ
‚úÖ **–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö**: –≤ 2 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ
‚úÖ **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ proto
‚úÖ **–ü–æ—Ç–æ–∫–æ–≤–æ—Å—Ç—å**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ streaming
‚úÖ **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤

## 5. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

### –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:
- ‚úÖ –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –≤ booking-service —á–µ—Ä–µ–∑ gRPC
- ‚úÖ –ú–æ–Ω–æ–ª–∏—Ç –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –º–æ–Ω–æ–ª–∏—Ç–µ

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π:
- ‚è≥ –ü–æ–∫–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –º–æ–Ω–æ–ª–∏—Ç–µ
- üìã –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–Ω–æ—Å –≤ booking-service
- üîÑ –ë—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ gRPC –∏ REST

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞:
- ‚úÖ –í—ã–Ω–µ—Å–µ–Ω–∞ –≤ booking-history-service
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ Kafka
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ 