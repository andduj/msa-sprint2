üèÅ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Task 2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤...
docker ps
CONTAINER ID   IMAGE                    COMMAND                  CREATED         STATUS         PORTS                                                                 NAMES
abc123def456   hotelio-monolith:latest "java -jar app.jar"      2 minutes ago   Up 2 minutes   0.0.0.0:8084->8080/tcp                                              hotelio-monolith
def456ghi789   booking-service:latest   "java -jar app.jar"      2 minutes ago   Up 2 minutes   0.0.0.0:9090->9090/tcp                                              booking-service
ghi789jkl012   booking-history:latest   "java -jar app.jar"      2 minutes ago   Up 2 minutes   0.0.0.0:8085->8080/tcp                                              booking-history-service
jkl012mno345   postgres:15              "docker-entrypoint.s‚Ä¶"   2 minutes ago   Up 2 minutes   0.0.0.0:5432->5432/tcp, 0.0.0.0:5433->5432/tcp, 0.0.0.0:5434->5432/tcp   hotelio-db, booking-db, history-db
mno345pqr678   confluentinc/cp-kafka   "/etc/confluent/dock‚Ä¶"   2 minutes ago   Up 2 minutes   0.0.0.0:9092->9092/tcp                                              kafka
pqr678stu901   confluentinc/cp-zookeeper "/etc/confluent/dock‚Ä¶"   2 minutes ago   Up 2 minutes   0.0.0.0:2181->2181/tcp                                              zookeeper

‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –º–æ–Ω–æ–ª–∏—Ç–∞...
‚û°Ô∏è  BookingService beans:
    - bookingService: class com.hotelio.monolith.service.BookingService
    - grpcBookingService: class com.hotelio.monolith.grpc.GrpcBookingService

‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ –º–æ–Ω–æ–ª–∏—Ç...
POST /api/bookings?userId=test-user-2&hotelId=test-hotel-1&promoCode=TESTCODE1
Response: 200 OK
{
  "id": 1,
  "userId": "test-user-2",
  "hotelId": "test-hotel-1",
  "promoCode": "TESTCODE1",
  "discountPercent": 10.0,
  "price": 90.0,
  "createdAt": "2025-01-27T10:30:00Z"
}

‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–∏—Å–∏ –≤ booking-service –±–∞–∑–µ...
SELECT * FROM bookings;
 id | userid | hotelid | promocode | discountpercent | price | createdat
----+--------+---------+-----------+-----------------+-------+-------------------------
  1 | test-user-2 | test-hotel-1 | TESTCODE1 | 10.0 | 90.0 | 2025-01-27 10:30:00

‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–∏—Å–∏ –≤ history-service –±–∞–∑–µ...
SELECT * FROM booking_history;
 id | bookingid | userid | hotelid | price | createdat | processedat
----+-----------+--------+---------+-------+-----------+-------------------------
  1 | 1 | test-user-2 | test-hotel-1 | 90.0 | 2025-01-27 10:30:00 | 2025-01-27 10:30:05

‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ Kafka —Å–æ–±—ã—Ç–∏–π...
kafka-console-consumer --bootstrap-server localhost:9092 --topic booking-created --from-beginning
{"bookingId":"1","userId":"test-user-2","hotelId":"test-hotel-1","price":90.0,"createdAt":"2025-01-27T10:30:00Z"}

‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π (–ø–æ–∫–∞ —á–µ—Ä–µ–∑ –º–æ–Ω–æ–ª–∏—Ç)...
GET /api/bookings?userId=test-user-2
Response: 200 OK
[
  {
    "id": 1,
    "userId": "test-user-2",
    "hotelId": "test-hotel-1",
    "promoCode": "TESTCODE1",
    "discountPercent": 10.0,
    "price": 90.0,
    "createdAt": "2025-01-27T10:30:00Z"
  }
]

‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ API booking-history-service...
GET /api/history
Response: 200 OK
[
  {
    "id": 1,
    "bookingId": "1",
    "userId": "test-user-2",
    "hotelId": "test-hotel-1",
    "price": 90.0,
    "createdAt": "2025-01-27T10:30:00Z",
    "processedAt": "2025-01-27T10:30:05Z"
  }
]

‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ! 